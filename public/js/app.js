var app=angular.module('app',['fileDialog','ui.bootstrap','angularMoment','textAngular','LocalStorageModule','angularjs-dropdown-multiselect','AxelSoft','vcRecaptcha','firebase','app.currencyMask']).directive('stringToNumber',function(){return{require:'ngModel',link:function(scope,element,attrs,ngModel){ngModel.$parsers.push(function(value){return ''+value;});ngModel.$formatters.push(function(value){return parseFloat(value);});}};});$.ajaxSetup({dataType:'json',error:function(xhr,status,error){loading.hide();console.log(error);}});$.ajaxPrefilter(function(options,originalOptions,jqXHR){if(options.type.toLowerCase()==="post"){options.data=options.data||"";options.data+=options.data?"&":"";options.data+=csrfTokenName+"="+encodeURIComponent(csrf_token);}});var loading={};loading.show=function(){if($('.loading').length<=0){$('body').append('<div id="ajax-loader" style="position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index: 99999999999999;background: rgba(0,0,0,0.4);" class="loading"><div class="loader"></div></div>');}
$('.loading').show();};loading.hide=function(){$('.loading').hide();};function isJson(str){try{JSON.parse(str);}catch(e){return false;}
return true;}
function getLocationAll(){$.ajax({url:baseUrl+'/auth/getlocations',method:'GET',success:function(resp){if(resp.success){var get_location_areas=resp.data.areas;var get_location_provinces=resp.data.provinces;var get_location_districts=resp.data.districts;var get_location_wards=resp.data.wards;get_location_areas.splice(0,0,{id:0,name:'Chọn khu vực'});get_location_provinces.splice(0,0,{id:0,name:'Chọn tỉnh thành',description:'Chọn tỉnh thành'});get_location_districts.splice(0,0,{id:0,name:'Chọn quận huyện'});get_location_wards.splice(0,0,{id:0,name:'Chọn phường xã'});localStorage.setItem('areas',JSON.stringify(get_location_areas));localStorage.setItem('provinces',JSON.stringify(get_location_provinces));localStorage.setItem('districts',JSON.stringify(get_location_districts));localStorage.setItem('wards',JSON.stringify(get_location_wards));}}});}
function getLocations(){var local_areas=localStorage.getItem('areas');var local_provinces=localStorage.getItem('provinces');var local_districts=localStorage.getItem('districts');var local_wards=localStorage.getItem('wards');var local_update=localStorage.getItem('update_location');var loadl=false;if(!isJson(local_provinces)){var loadl=true;}else{var arrp=JSON.parse(local_provinces);if(isJson(local_provinces)&&arrp!=null&&typeof(arrp[0].name)==='undefined'){var loadl=true;}}
if(loadl||!local_provinces||!local_districts||!local_wards){getLocationAll();}
if(locationVersion!=local_update){getLocationAll();localStorage.setItem('update_location',locationVersion);}}
getLocations();function removeParam(key,sourceURL){var rtn=sourceURL.split("?")[0],param,params_arr=[],queryString=(sourceURL.indexOf("?")!==-1)?sourceURL.split("?")[1]:"";if(queryString!==""){params_arr=queryString.split("&");for(var i=params_arr.length-1;i>=0;i-=1){param=params_arr[i].split("=")[0];if(param===key){params_arr.splice(i,1);}}
rtn=rtn+"?"+params_arr.join("&");}
return rtn;}
function getParameterByName(name,url){if(!url)
url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)
return null;if(!results[2])
return '';return decodeURIComponent(results[2].replace(/\+/g," "));}
function updateQueryStringParameter(uri,key,value){var re=new RegExp("([?&])"+key+"=.*?(&|$)","i");var separator=uri.indexOf('?')!==-1?"&":"?";if(uri.match(re)){return uri.replace(re,'$1'+key+"="+value+'$2');}
else{return uri+separator+key+"="+value;}}
var site_banner={};site_banner.createCookie=function(name,value,days){var expires="";if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toUTCString();}
document.cookie=name+"="+value+expires+"; path=/";};site_banner.readCookie=function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')
c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)
return c.substring(nameEQ.length,c.length);}
return null;};$(document).ready(function(){var arrTimeLandingPage=$('.b__flash--countdown');if(arrTimeLandingPage){var countDownDatesLandingPage=[];for(iLandingPage=0;iLandingPage<arrTimeLandingPage.length;iLandingPage++){countDownDatesLandingPage[iLandingPage]=new Date(arrTimeLandingPage[iLandingPage].innerText).getTime();}
var xLandingPage=setInterval(function(){var nowLandingPage=new Date().getTime();for(iLandingPage=0;iLandingPage<arrTimeLandingPage.length;iLandingPage++){var distanceLandingPage=countDownDatesLandingPage[iLandingPage]-nowLandingPage;var daysLandingPage=Math.floor(distanceLandingPage/(1000*60*60*24));var hoursLandingPage=Math.floor((distanceLandingPage%(1000*60*60*24))/(1000*60*60));var minutesLandingPage=Math.floor((distanceLandingPage%(1000*60*60))/(1000*60));var secondsLandingPage=Math.floor((distanceLandingPage%(1000*60))/1000);if((daysLandingPage+hoursLandingPage+minutesLandingPage+secondsLandingPage)<=0){clearInterval(xLandingPage);break;}
if(daysLandingPage>0){hoursLandingPage+=(daysLandingPage*24);}
var elLandingPage=arrTimeLandingPage[iLandingPage];$(elLandingPage).html('<span class="hour bg_number">'+hoursLandingPage+'</span><label class="two-dot">:</label><span class="minute bg_number">'+minutesLandingPage+'</span><label class="two-dot">:</label><span class="second bg_number">'+secondsLandingPage+'</span>');}},1000);}});